%!TEX encoding = UTF8
%!TEX root = 0-notes.tex

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% PACKAGE IMPORTS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\usepackage[french]{babel}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}

\usepackage[
	margin=2cm,
	right=2.2cm,
	footskip=1.5cm,
]{geometry}

%ams
\usepackage{amsmath,amsfonts,amsthm,amssymb,mathtools}

\usepackage{bookmark}
\usepackage{enumitem}
\usepackage[most,many,breakable]{tcolorbox}
\usepackage{varwidth,etoolbox}
\usepackage[makeroom]{cancel}
\usepackage{xcolor}
\usepackage{multicol,array}
\usepackage[ruled,vlined,linesnumbered]{algorithm2e}

\usepackage{caption, subcaption}

\usepackage{marginnote}

\usepackage{makecell} %pour \thead dans tabular ex3 (aligner verticalement le coeff de proportionnalité)

%index
\usepackage[texindy]{imakeidx}
\makeindex[
	columns=2, 
	title=Index, 
	options= -L french,
	%intoc,
]
\indexsetup{level=\chapter}

%virgules
\usepackage{icomma}

% for striked out implies sign (\centernot\implies)
\usepackage{centernot}

% roman numerals for \section
\renewcommand{\thesection}{\Roman{section}} 

% tikz
\usepackage{tikz}

% package systeme pour les systèmes d'équations bien alignés
\usepackage{systeme}
\sysalign{r,r}
\syseqspace{3pt}
\syssignspace{3pt}

\newcommand{\sys}[2]{\systeme{#1{,}, #2.}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% SELF MADE COLORS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\input{colors}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% TCOLORBOX SETUPS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\input{environments}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% TABLE OF CONTENTS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{titletoc}
\contentsmargin{0cm}
% chapter
\titlecontents{chapter}[3.7pc]
{\addvspace{30pt}%
	\begin{tikzpicture}[remember picture, overlay]%
		\draw[fill=doc!60,draw=doc!60] (-7,-.1) rectangle (0.2,.6);%
		\pgftext[left,x=-3.5cm,y=0.2cm]{\color{white}\Large\sc\bfseries Chapitre\ \thecontentslabel};%
	\end{tikzpicture}\qquad\color{doc!80}\large\sc\bfseries}%
{}
{}
{\;\titlerule\;\large\sc\bfseries Page \thecontentspage
	\begin{tikzpicture}[remember picture, overlay]
		\draw[fill=doc!60,draw=doc!60] (2pt,0) rectangle (4,0.1pt);
	\end{tikzpicture}}%
% section
\titlecontents{section}[3.7pc]
{\addvspace{2pt}}
{\contentslabel[\thecontentslabel]{2pc}}
{}
{\hfill\small \thecontentspage}
[]
% subsection
\titlecontents{subsection}[3.7pc]
{\addvspace{-1pt}\small\qquad}
{\contentslabel[\thecontentslabel]{2pc}}
{}
{}
[]

% toc
\makeatletter
\renewcommand{\tableofcontents}{%
	\chapter*{%
	  \vspace*{-20\p@}%
	  \begin{tikzpicture}[remember picture, overlay]%
		  \pgftext[right,x=15cm,y=0.2cm]{\color{doc!60}\Huge\sc\bfseries \contentsname};%
		  \draw[fill=doc!60,draw=doc!60] (13,-.75) rectangle (20,1);%
		  \clip (13,-.75) rectangle (20,1);
		  \pgftext[right,x=15cm,y=0.2cm]{\color{white}\Huge\sc\bfseries \contentsname};%
	  \end{tikzpicture}}%
	\@starttoc{toc}}
\makeatother
  